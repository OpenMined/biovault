name: syqure-allele-freq
version: 0.1.0
inputs:
  samplesheet: List[GenotypeRecord]
steps:
- id: allele_freq
  uses: ./allele-freq
  with:
    participants: inputs.samplesheet
  publish:
    allele_freq: File(allele_freq.tsv)
    allele_freq_npz: File(allele_freq.npz)
    locus_index: File(locus_index.json)
    vcf_results: File(vcf_conversion_results.tsv)
- id: syqure_aggregate
  uses: ./syqure-allele-freq-aggregate
  with:
    allele_freq_npz: step.allele_freq.outputs.allele_freq_npz
    locus_index: step.allele_freq.outputs.locus_index
  publish:
    sum_ac: File(sum_ac.txt)
    sum_an: File(sum_an.txt)
    union_index: File(union_locus_index.json)
