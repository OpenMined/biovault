apiVersion: syftbox.openmined.org/v1alpha1
kind: Flow
metadata:
  name: allele-freq
  version: 0.1.0
spec:
  inputs:
    samplesheet:
      type: List[GenotypeRecord]
  steps:
    - id: allele_freq
      uses:
        source:
          kind: local
          path: ./
      with:
        participants: inputs.samplesheet
      publish:
        allele_freq: File(allele_freq.tsv)
        vcf_results: File(vcf_conversion_results.tsv)
      store:
        allele_frequencies:
          kind: sql
          source: allele_freq
          table: allele_freq_{run_id}
          key_column: locus
